<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta content="no-cache, no-store, must-revalidate" http-equiv="Cache-Control">
	<meta http-equiv="Expires" content="-1">
	<meta name="viewport" content="initial-scale=1.5,maximum-scale=3,user-scalable=no"/>
    <title>InstantPhoto - Client</title>
    <link rel="icon" href="./favicon.ico">
    <script src="/socket.io/socket.io.js"></script>
	<script src="/compressor.js"></script>
	<script src="./jquery.js"></script>
	<script src="./html5-qrcode.min.js"></script>
	<link rel="stylesheet" href="./bootstrap.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/inter-ui@3.13.1/Inter%20(web)/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
	<script src="./bootstrap.js"></script>
    <!-- JS-Cookie -->
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
  </head>
  
  <body>
	<header>
		<div class="refresh-page">
			<div class="btn refresh-btn" onclick="cleanReload()" id="refresh">
				<span>Reload Page</span>
			</div>
		</div>
	</header>
  
    <!-- File input -->
	<div class="container" id="container">
		
		<div class="row-fluid align-items-center justify-content-start">
			<div class="col">
				<h5 id="croom">Status: <span id="roomindicator" class="offline">&#x25cf; Offline</span></h5>
				<h5 id="status">Waiting to join room...</h5>
			</div>
		</div>	
		<div class="row-fluid align-items-center justify-content-start">
			<div class="col">
				<form class="md-form" id="holder" name="upload">
					<div class="custom-file mb-3">
						<input type="file" class="custom-file-input" id="input1" name="fresh" accept="image/*" capture="camera" autofocus>
						<label class="custom-file-label" for="input1">Open Camera</label>
					</div>
					<div class="custom-file mb-3">
						<input type="file" class="custom-file-input" id="input2" name="gallery" accept="image/*">
						<label class="custom-file-label" for="input2">Gallery Upload</label>
					</div>
				</form> 
				<button type="button" class="button save-btn" id="savefile" onclick="savefile()">Save File</button>
			</div>
		</div>
	</div>
	
	<!-- Popup for connecting room -->
	<div class="modal fade" id="popup" tabindex="-1" role="dialog" aria-labelledby="joinroom-popup" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="joinroom-title">Join A Room</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form action="#" onsubmit="return getRoom()">
						<span>Enter room code:</span>
						<input label="roomCode" type="text" name="roomCode" id="roomCode" placeholder="Code here" style="width:65%"/>
					</form>
					<p></p>
						<!-- <div id="reader"></div> -->
						<div id="reader" style="position: relative; padding: 0px; border: 1px solid silver;"><div style="text-align: left; margin: 0px; padding: 5px; font-size: 20px; border-bottom: 1px solid rgba(192, 192, 192, 0.18);"><span>QR Code Scanner</span><span id="reader__status_span" style="float: right; padding: 5px 7px; font-size: 14px; background: rgb(238, 238, 255); border: 1px solid rgba(0, 0, 0, 0); color: rgb(17, 17, 17);">IDLE</span><div id="reader__header_message" style="display: block; font-size: 14px; padding: 2px 10px; margin-top: 4px; border-top: 1px solid rgb(246, 246, 246); background: rgba(203, 36, 49, 0.14); color: rgb(203, 36, 49);">NotFoundError : Requested device not found</div></div><div id="reader__scan_region" style="width: 100%; min-height: 100px; text-align: center;"><br><img width="64" src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/assets/camera-scan.gif" style="opacity: 0.3;"></div><div id="reader__dashboard" style="width: 100%;"><div id="reader__dashboard_section" style="width: 100%; padding: 10px; text-align: left;"><div><div id="reader__dashboard_section_csr" style="display: block;"><div style="text-align: center;"><button>Request Camera Permissions</button></div></div><div id="reader__dashboard_section_fsr" style="text-align: center; display: none;"><input id="reader__filescan_input" accept="image/*" type="file" disabled="" style="width: 200px;"><span>&nbsp; Select Image</span></div></div><div style="text-align: center;"><a id="reader__dashboard_section_swaplink" href="#scan-using-file" style="text-decoration: underline;">Scan an Image File</a></div></div></div></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" onclick="getRoom()">Join</button>
				</div>
			</div>
		</div>
	</div>
	
	</body>
	
	<footer>
		<div class="footer" id="joinroom-button">
			<button type="button" class="btn btn-light" data-toggle="modal" data-target="#popup">Join Room</button>
		</div>
	</footer>
	
    <!-- Client Code -->
  <script src="./dev.js"></script>
</html>
